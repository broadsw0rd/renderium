!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.Renderium=i()}(this,function(){"use strict";function t(t,i){return i={exports:{}},t(i,i.exports),i.exports}function i(){return window.devicePixelRatio?Math.floor(window.devicePixelRatio):1}var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=t(function(t,i){!function(n,e){"object"==typeof i&&"undefined"!=typeof t?t.exports=e():"function"==typeof define&&define.amd?define(e):n.Vector=e()}(n,function(){function t(t,i){this.x=t||0,this.y=i||0}function i(t){this.vector=t,this.__idx=0}return t.displayName="Vector",t.from=function(i){return new t(i[0],i[1])},t.fromAngle=function(i,n){return new t(n*Math.cos(i),n*Math.sin(i))},t.parse=function(i){return t.from(i.trim().replace(","," ").split(/\s+/).map(parseFloat))},t.add=function(t,i){return i.add(t)},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.iadd=function(t,i){return i.iadd(t)},t.prototype.iadd=function(t){return this.x+=t.x,this.y+=t.y,this},t.sub=function(t,i){return i.sub(t)},t.prototype.sub=function(i){return new t(this.x-i.x,this.y-i.y)},t.isub=function(t,i){return i.isub(t)},t.prototype.isub=function(t){return this.x-=t.x,this.y-=t.y,this},t.mul=function(t,i){return i.mul(t)},t.prototype.mul=function(i){return new t(this.x*i,this.y*i)},t.imul=function(t,i){return i.imul(t)},t.prototype.imul=function(t){return this.x*=t,this.y*=t,this},t.div=function(t,i){return i.div(t)},t.prototype.div=function(i){return new t(this.x/i,this.y/i)},t.idiv=function(t,i){return i.idiv(t)},t.prototype.idiv=function(t){return this.x/=t,this.y/=t,this},t.lerp=function(t,i,n){return t.lerp(i,n)},t.prototype.lerp=function(i,n){var e=(1-n)*this.x+n*i.x,o=(1-n)*this.y+n*i.y;return new t(e,o)},t.normalized=function(t){return t.normalized()},t.prototype.normalized=function(){var i=this.x,n=this.y,e=Math.sqrt(i*i+n*n);return e>0?new t(i/e,n/e):new t(0,0)},t.normalize=function(t){return t.normalize()},t.prototype.normalize=function(){var t=this.x,i=this.y,n=Math.sqrt(t*t+i*i);return n>0&&(this.x=t/n,this.y=i/n),this},t.magnitude=function(t){return t.magnitude()},t.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.dot=function(t,i){return i.dot(t)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.distance=function(t,i){return i.distance(t)},t.prototype.distance=function(t){var i=this.x-t.x,n=this.y-t.y;return Math.sqrt(i*i+n*n)},t.angleOf=function(t){return t.angleOf()},t.prototype.angleOf=function(){return Math.atan2(this.y,this.x)},t.angleTo=function(t,i){return i.angleTo(t)},t.prototype.angleTo=function(t){return Math.acos(this.dot(t)/this.magnitude()*t.magnitude())},t.reset=function(t,i){return i.reset(t)},t.prototype.reset=function(t){return this.x=t.x,this.y=t.y,this},t.zero=function(t){return t.zero()},t.prototype.zero=function(){return this.x=0,this.y=0,this},t.set=function(t,i,n){return n.set(t,i)},t.prototype.set=function(t,i){return this.x=t||0,this.y=i||0,this},t.copy=function(t){return t.copy()},t.prototype.copy=function(){return new t(this.x,this.y)},t.toJSON=function(t){return t.toJSON()},t.prototype.toJSON=function(){return[this.x,this.y]},t.toString=function(t){return t?t.toString():Function.prototype.toString.call(this)},t.prototype.toString=function(){return this.x.toFixed(3)+" "+this.y.toFixed(3)},"undefined"!=typeof Symbol&&Symbol.toStringTag&&(t.prototype[Symbol.toStringTag]="Vector"),t.toArray=function(t){return t.toArray()},t.prototype.toArray=function(){return[this.x,this.y]},t.equals=function(t,i){return t.equals(i)},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.compare=function(t,i){return t.compare(i)},t.prototype.compare=function(t){var i=this.magnitude(),n=t.magnitude();return(i>n)-(n>i)},Object.defineProperties(t.prototype,{xx:{configurable:!0,get:function(){return new t(this.x,this.x)},set:function(t){this.x=t.x,this.y=t.x}},xy:{configurable:!0,get:function(){return new t(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},yx:{configurable:!0,get:function(){return new t(this.y,this.x)},set:function(t){this.x=t.y,this.y=t.x}},yy:{configurable:!0,get:function(){return new t(this.y,this.y)},set:function(t){this.x=t.y,this.y=t.y}}}),i.prototype.next=function(){return 0===this.__idx?(this.__idx++,{done:!1,value:this.vector.x}):1===this.__idx?(this.__idx++,{done:!1,value:this.vector.y}):{done:!0,value:void 0}},"undefined"!=typeof Symbol&&Symbol.iterator&&(t.prototype[Symbol.iterator]=function(){return new i(this)}),t})}),o=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")},r={},s={},h=function(){function t(){o(this,t)}return t.prototype.getImage=function(t){return s[t]},t.prototype.getStatus=function(t){return r[t]},t.prototype.load=function(i){var n=this.getStatus(i);if(n!==t.IMAGE_STATUS_LOADING&&n!==t.IMAGE_STATUS_LOADED){r[i]=t.IMAGE_STATUS_LOADING;var e=new window.Image;e.onload=function(){r[i]=t.IMAGE_STATUS_LOADED,s[i]=this},e.src=i}},t}();h.IMAGE_STATUS_LOADING=1,h.IMAGE_STATUS_LOADED=2;var a=function(){function t(i){var n=i.start,e=i.end,r=i.from,s=i.to;o(this,t),this.start=n,this.end=e,this.from=r,this.to=s,this._isGradient=!0,this._gradient=null}return t.isGradient=function(t){return t&&t._isGradient},t.prototype.createGradient=function(t){return this._gradient=t.ctx.createLinearGradient(this.start.x,this.start.y,this.end.x,this.end.y),this._gradient.addColorStop(0,this.from),this._gradient.addColorStop(1,this.to),this._gradient},t.prototype.valueOf=function(){return this._gradient},t}(),u=function(){function t(i){var n=i.antialiasing,e=i.width,r=i.height;o(this,t),this.antialiasing=Boolean(n),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.scale({width:e||t.DEFAULT_WIDTH,height:r||t.DEFAULT_HEIGHT}),this.imageLoader=new h}return t.createGradient=function(t){var i=t.start,n=t.end,e=t.from,o=t.to;return new a({start:i,end:n,from:e,to:o})},t.prototype.scale=function(i){var n=i.width,e=i.height;this.width=n||t.DEFAULT_WIDTH,this.height=e||t.DEFAULT_HEIGHT,this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this.canvas.removeAttribute("style"),this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height,this.ctx.canvas.style.width=this.width+"px",this.ctx.canvas.style.height=this.height+"px",window.devicePixelRatio&&(this.ctx.canvas.width=this.width*=window.devicePixelRatio,this.ctx.canvas.height=this.height*=window.devicePixelRatio),this.antialiasing||this.ctx.translate(.5,.5)},t.prototype.clear=function(){this.computeBorders(),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.width,this.height),this.ctx.restore()},t.prototype.getColor=function(t){return a.isGradient(t)?t.createGradient(this):t},t.prototype.drawArc=function(t){var i=t.position,n=t.radius,e=t.startAngle,o=t.endAngle,r=t.color,s=t.width,h=void 0===s?1:s;this.ctx.strokeStyle=this.getColor(r),this.ctx.lineWidth=h,this.ctx.beginPath(),this.ctx.arc(i.x,i.y,n,e,o),this.ctx.stroke()},t.prototype.drawArea=function(t){var i=t.points,n=t.threshold,e=t.color,o=t.fillColor,r=t.width,s=void 0===r?1:r;this.drawPolyline({points:i,color:e,width:s}),this.ctx.fillStyle=this.getColor(o),this.ctx.lineTo(i[i.length-1].x,n),this.ctx.lineTo(i[0].x,n),this.ctx.closePath(),this.ctx.fill()},t.prototype.drawCircle=function(t){var i=t.position,n=t.radius,e=t.color,o=t.fillColor,r=t.width,s=void 0===r?1:r;this.drawArc({position:i,radius:n,startAngle:0,endAngle:2*Math.PI,color:e,width:s}),o&&(this.ctx.fillStyle=this.getColor(o),this.ctx.fill())},t.prototype.drawImage=function(t){var i=t.position,n=t.image,e=t.width,o=void 0===e?n.width:e,r=t.height,s=void 0===r?n.height:r,a=t.opacity,u=void 0===a?1:a;if("string"==typeof n){if(this.imageLoader.getStatus(n)!==h.IMAGE_STATUS_LOADED)return void this.imageLoader.load(n);n=this.imageLoader.getImage(n),o=n.width,s=n.height}var c=this.ctx.globalAlpha;this.ctx.globalAlpha=u,this.ctx.drawImage(n,i.x-o/2,i.y-s/2,o,s),this.ctx.globalAlpha=c},t.prototype.drawPolygon=function(t){var i=t.points,n=t.color,e=t.fillColor,o=t.width,r=void 0===o?1:o;this.drawPolyline({points:i.concat(i[0]),color:n,width:r}),e&&(this.ctx.fillStyle=this.getColor(e),this.ctx.fill())},t.prototype.drawPolyline=function(t){var i=t.points,n=t.color,e=t.lineDash,o=void 0===e?[]:e,r=t.width,s=void 0===r?1:r;this.ctx.strokeStyle=this.getColor(n),this.ctx.lineWidth=s,this.ctx.lineJoin="round",this.ctx.beginPath(),this.ctx.moveTo(i[0].x,i[0].y);for(var h,a=1;a<i.length;a++)h=i[a],this.ctx.lineTo(h.x,h.y);this.ctx.setLineDash(o),this.ctx.stroke()},t.prototype.drawRect=function(t){var i=t.position,n=t.width,o=t.height,r=t.color,s=t.fillColor,h=t.strokeWidth,a=void 0===h?1:h;this.drawPolygon({points:[new e(i.x-n/2,i.y+o/2),new e(i.x+n/2,i.y+o/2),new e(i.x+n/2,i.y-o/2),new e(i.x-n/2,i.y-o/2)],color:r,fillColor:s,width:a})},t.prototype.drawText=function(t){var n=t.position,e=t.text,o=t.color,r=t.font,s=t.size,h=t.align,a=void 0===h?"center":h,u=t.baseline,c=void 0===u?"middle":u;this.ctx.fillStyle=this.getColor(o),this.ctx.font=s*i()+"px "+r,this.ctx.textAlign=a,this.ctx.textBaseline=c,this.ctx.fillText(e,n.x,n.y)},t.prototype.measureText=function(t){var n,e=t.text,o=t.font,r=t.size;if(o&&r){var s=this.ctx.font;this.ctx.font=r*i()+"px "+o,n=this.ctx.measureText(e).width,this.ctx.font=s}else n=this.ctx.measureText(e).width;return n},t}();u.DEFAULT_WIDTH=100,u.DEFAULT_HEIGHT=100,u.GRADIENT_DIRECTION_TOP_TO_BOT="top-to-bot",u.EXTRA_PIXELS=10;var c={CanvasLayer:u};return c});
